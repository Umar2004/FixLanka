# FixLanka - ASCII Sequence Diagrams

---

┌───────────────────────────────────────────────────────────────┐
│                  1. USER REGISTRATION SEQUENCE                │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌──────────────┐
│   Citizen   │ │   System    │ │  Database   │ │ Notification │
└─────────────┘ └─────────────┘ └─────────────┘ └──────────────┘
      │               │               │               │
      │ 1. Fill Form  │               │               │
      │──────────────▶│               │               │
      │               │ 2. Validate   │               │
      │               │──────────────▶│               │
      │               │ 3. Check Email│               │
      │               │──────────────▶│               │
      │               │◀──────────────│               │
      │               │ 4. Hash Pass  │               │
      │               │ 5. Insert User│               │
      │               │──────────────▶│               │
      │               │◀──────────────│               │
      │               │ 6. Send Email │               │
      │               │──────────────▶│               │
      │               │               │ 7. Notify     │
      │               │               │──────────────▶│
      │               │               │               │
      │ 8. Show Result│               │               │
      │◀──────────────│               │               │

---

┌───────────────────────────────────────────────────────────────┐
│                     2. USER LOGIN SEQUENCE                    │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│   Citizen   │ │   System    │ │  Database   │
└─────────────┘ └─────────────┘ └─────────────┘
      │               │               │
      │ 1. Enter Cred │               │
      │──────────────▶│               │
      │               │ 2. Fetch User │
      │               │──────────────▶│
      │               │◀──────────────│
      │               │ 3. Verify Pass│
      │               │               │
      │               │ 4. Create Sess│
      │               │               │
      │ 5. Show Result│               │
      │◀──────────────│               │

---

┌───────────────────────────────────────────────────────────────┐
│                 3. SUBMIT COMPLAINT SEQUENCE                  │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌──────────────┐ ┌──────────────┐
│   Citizen   │ │   System    │ │  Database   │ │ Department   │ │ Notification │
└─────────────┘ └─────────────┘ └─────────────┘ └──────────────┘ └──────────────┘
      │               │               │               │               │
      │ 1. Submit     │               │               │               │
      │ Complaint     │               │               │               │
      │──────────────▶│               │               │               │
      │               │ 2. Validate   │               │               │
      │               │ Input Data    │               │               │
      │               │──────────────▶│               │               │
      │               │ 3. Upload     │               │               │
      │               │ Files         │               │               │
      │               │──────────────▶│               │               │
      │               │ 4. Generate   │               │               │
      │               │ Ref Number    │               │               │
      │               │──────────────▶│               │               │
      │               │ 5. Assign     │               │               │
      │               │ Department    │               │               │
      │               │──────────────▶│               │               │
      │               │               │ 6. Notify     │               │
      │               │               │ Department    │               │
      │               │──────────────▶│               │               │
      │               │ 7. Send       │               │               │
      │               │ Notification  │               │               │
      │               │──────────────▶│               │               │
      │               │               │               │ 8. Send       │
      │               │               │               │ Notification  │
      │               │──────────────▶│               │               │
      │ 9. Return     │               │               │               │
      │ Success       │               │               │               │
      │◀──────────────│               │               │               │

---

┌───────────────────────────────────────────────────────────────┐
│              4. TRACK COMPLAINT STATUS SEQUENCE               │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│   Citizen   │ │   System    │ │  Database   │
└─────────────┘ └─────────────┘ └─────────────┘
      │               │               │
      │ 1. Enter Ref  │               │
      │──────────────▶│               │
      │               │ 2. Fetch Comp │
      │               │──────────────▶│
      │               │◀──────────────│
      │ 3. Show Status│               │
      │◀──────────────│               │

---

┌───────────────────────────────────────────────────────────────┐
│                 5. DEPARTMENT LOGIN SEQUENCE                  │
└───────────────────────────────────────────────────────────────┘

┌──────────────┐ ┌─────────────┐ ┌─────────────┐
│ Department   │ │   System    │ │  Database   │
└──────────────┘ └─────────────┘ └─────────────┘
      │               │               │
      │ 1. Enter Cred │               │
      │──────────────▶│               │
      │               │ 2. Fetch Dept │
      │               │──────────────▶│
      │               │◀──────────────│
      │               │ 3. Verify Pass│
      │               │               │
      │               │ 4. Create Sess│
      │               │               │
      │ 5. Show Result│               │
      │◀──────────────│               │

---

┌───────────────────────────────────────────────────────────────┐
│         6. DEPARTMENT UPDATES COMPLAINT STATUS SEQUENCE        │
└───────────────────────────────────────────────────────────────┘

┌──────────────┐ ┌─────────────┐ ┌─────────────┐ ┌──────────────┐
│ Department   │ │   System    │ │  Database   │ │ Notification │
└──────────────┘ └─────────────┘ └─────────────┘ └──────────────┘
      │               │               │               │
      │ 1. Select     │               │               │
      │ Complaint     │               │               │
      │──────────────▶│               │               │
      │               │ 2. Validate   │               │
      │               │ Action        │               │
      │               │──────────────▶│               │
      │               │ 3. Update     │               │
      │               │ Status        │               │
      │               │──────────────▶│               │
      │               │◀──────────────│               │
      │ 4. Notify     │               │               │
      │ Citizen       │               │               │
      │──────────────▶│               │               │
      │               │               │ 5. Send       │
      │               │               │ Notification  │
      │               │──────────────▶│               │
      │ 6. Show Result│               │               │
      │◀──────────────│               │               │

---

┌───────────────────────────────────────────────────────────────┐
│             7. ADMIN REASSIGNS COMPLAINT SEQUENCE             │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌──────────────┐ ┌──────────────┐
│   Admin     │ │   System    │ │  Database   │ │ Department   │ │ Notification │
└─────────────┘ └─────────────┘ └─────────────┘ └──────────────┘ └──────────────┘
      │               │               │               │               │
      │ 1. Select     │               │               │               │
      │ Complaint     │               │               │               │
      │──────────────▶│               │               │               │
      │               │ 2. Update Dept│               │               │
      │               │──────────────▶│               │               │
      │               │◀──────────────│               │               │
      │ 3. Notify Dept│               │               │               │
      │──────────────▶│               │               │               │
      │               │               │ 4. Send       │               │
      │               │               │ Notification  │               │
      │               │──────────────▶│               │               │
      │ 5. Notify User│               │               │               │
      │──────────────▶│               │               │               │
      │               │               │               │ 6. Send       │
      │               │               │               │ Notification  │
      │               │──────────────▶│               │               │
      │ 7. Show Result│               │               │               │
      │◀──────────────│               │               │               │

---

┌───────────────────────────────────────────────────────────────┐
│                   8. SUBMIT REVIEW SEQUENCE                   │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│   Citizen   │ │   System    │ │  Database   │
└─────────────┘ └─────────────┘ └─────────────┘
      │               │               │
      │ 1. Fill Review│               │
      │──────────────▶│               │
      │               │ 2. Validate   │
      │               │ 3. Insert     │
      │               │ Review        │
      │               │──────────────▶│
      │               │◀──────────────│
      │ 4. Update     │               │
      │ Complaint     │               │
      │ Status        │               │
      │──────────────▶│               │
      │               │ 5. Show Result│
      │◀──────────────│               │

---

┌───────────────────────────────────────────────────────────────┐
│                  9. PASSWORD RESET SEQUENCE                   │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌──────────────┐
│   Citizen   │ │   System    │ │  Database   │ │ Notification │
└─────────────┘ └─────────────┘ └─────────────┘ └──────────────┘
      │               │               │               │
      │ 1. Request    │               │               │
      │ Reset         │               │               │
      │──────────────▶│               │               │
      │               │ 2. Find User  │               │
      │               │──────────────▶│               │
      │               │◀──────────────│               │
      │ 3. Generate   │               │               │
      │ Token         │               │               │
      │──────────────▶│               │               │
      │               │ 4. Save Token │               │
      │               │──────────────▶│               │
      │               │◀──────────────│               │
      │ 5. Send Email │               │               │
      │──────────────▶│               │               │
      │               │               │ 6. Notify     │
      │               │               │──────────────▶│
      │               │               │               │
      │ 7. Enter New  │               │               │
      │ Password      │               │               │
      │──────────────▶│               │               │
      │               │ 8. Validate   │               │
      │               │ Token         │               │
      │               │──────────────▶│               │
      │               │◀──────────────│               │
      │ 9. Update Pass│               │               │
      │──────────────▶│               │               │
      │               │ 10. Show      │               │
      │               │ Result        │               │
      │◀──────────────│               │               │

---

┌───────────────────────────────────────────────────────────────┐
│                        10. LOGOUT SEQUENCE                    │
└───────────────────────────────────────────────────────────────┘

┌─────────────┐ ┌─────────────┐
│   User      │ │   System    │
└─────────────┘ └─────────────┘
      │               │
      │ 1. Click      │
      │ Logout        │
      │──────────────▶│
      │               │
      │ 2. Destroy    │
      │ Session       │
      │               │
      │ 3. Redirect   │
      │ to Home/Login │
      │◀──────────────│

--- 